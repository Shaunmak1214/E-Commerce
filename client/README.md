# Things the client-side has been built on
### Redux
- Redux forms the backbone for communicating with the rest API we have built on the back-end. 
- Whenever we need to get or post to our server we use **redux actions**.
- The response from the server is sent to the **redux reducer**. We receive this response as props in our components.
- All requests and responses are done in JSON format.
- There are mainly 4 states in our app : 
  - User - contains details of user and the signed in state
  - products - manages the entire product collection
  - Cart - contains all the info abt the user's cart
  - OrderHistory - contains the history of confirmed orders.
### Material UI
- Most of the material UI components have been integrated into this app. 
- A lot of styling to the material UI is provided by JSS (Css in JavaScript).
- You can refer to the [Material UI Documentation](https://material-ui.com/getting-started/usage/) for further explanation.
### Breakpoints
- CSS breakpoints are used all over the site to make it extremely responsive. 
 ```
  mb: "420px",
  sm: "640px",
  md: "768px",
  lg: "1024px",
  xl: "1280px",
```

# Structure
##### The project is well structured and organised for easy navigation.
#### The public folder contains our index.html. It contains a script provided by **Razor Pay** which is the payment gateway we use in our app.
### Src folder has all the components our app will use : 
- **Actions** contains the actions for redux store.
- **Assets** contains all the static files we use in different places.
- **Components** has those components which will be used everywhere in our app. 
- **hoc** are the higer order components which will wrap our app. Basically our app will be a child of these.
- **reducers** contains the different reducers for redux store.
- **styles** stores the main styles generated by tailwind CSS. Some components have their own styles as well. 
- **Widgets UI** contains all the re-useable components being used thoughout the app.

# HOCs
Higher order components are those which affect all routes in our app. They are never called from inside our code. Let's take a look at them.

## Layout
The layout is a functional higher order component. All our routes are passed as children to Layout which it then renders between a header and a footer.
```
<Layout>
  <Routes />
</Layout>
```

And our Layout returns this 
```
<Header />
  {props.children}
<Footer />
```
##### This structure gives the user a consistent feel while allowing him to navigate the website with utmost ease.

## Auth
The Auth hoc has just one job. To check with every route if the user has access or not. Every time we go to some link or refresh page, our component goes throuugh Auth HOC. 

**How it works**
- The Auth is a functional hoc. It receives the component we are about to render as a parameter.

- ```Auth(Composed Class, authUser, authAdmin)```

- As soon as some route is visited the Auth is called and an action is passed to redux store to get the auth details of the user. 
- The store sends a **GET** request to our server and receives a response with the details of the user if he is logged in or just an 

```{isAuth : false}```. 

- It then checks if the user is an admin or not. 
- Based on the above authorisation parameters it allows the user if he has access or redirects them to home page. In case the user is logged in but tried to access an admin route he is shown a Authorisation Revoked page.

##### The Auth hoc is the backbone of the security for our app and therefore very essential.

# Header
The Header handles a lot of functionalities - from logging in our user to navigating the whole site. I won't go much deep into logging in and sign up as thats mostly a part of the backend.

### Sidenav
- The sidenav is a part of Material UI's Sidenav Component.
- It's connected to the redux store to get the auth details of the user already stored in the user state of the store because of Auth hoc.
- There is a separate funcitonal component for sidenav items. This has three lists - no auth, user and for admin. 
- The sidenav items receives the auth details from sidenav and renders the list it deems fit.
- The Header passes sidenav props for toggling the log in and log out modals. 

### Forms 
- The forms have their own components. And they use the Input Widget which is custom made without the sue of material UI.
- The forms have been made to handle all kind of errors. All inputs are controlled.
- The inputs have their errors updated as they are filled in or blurred. 

#### Log In
- When the Log In form is submitted, it checks all the inputs for their errors.
- If they  all check out then the information is sent to the redux store which calls the log in api. 
- If the log in details match then we get a response like this 
```
isAuth : true,
id : user._id,
.
.
.
address : user.address
```
- If there is problem we get the appropriate response to display the error messages.

#### Sign Up
- Sign Up sends the user details to the server through an action through the redux store. 
- The server sends a mail regrading confirmation of the user.
- If mail is sent we receive `isAuth: false` as a response from the server. 
- If any error occurs we get appropriate response from the server.

### Cart
- The header is also connected by the cart state of redux. It only gets the number of items from the cart and displays it like a badge on the cart icon.

### The Header has a fixed position. The scrolling effect is done by adding a scroll event listener.

Also I have tried to make the header as responsive as possible. 

##### Creating a separate route for log in would have been more conveniant though.

# Home


# Dependencies

### Framework
- react
- react-dom
- react-router-dom
- react-redux
- react-router-navigation-prompt

### CSS 
- Material UI
- Tailwind CSS
- React-Bootstrap
- Material UI Chip Input
- Auto Prefixer
- PostCSS CLI
- PostCSS 
- RSuite
- Moment JS

### Animation
- React Transition Group
- React-Reveal
- Scroll Magic
- react-scroll-magic
- gsap

### Network and Requests
- axios
- HTTP-Proxy-Middleware
